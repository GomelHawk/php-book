---
description: тянул дед запрос из репы ...
---

# Repositories

В коде репозитории должны инжектиться напрямую вместо внутреннего вызова в методе из менеджера (такой вызов нарушает [закон Деметры](../principles/lod.md)). Более подробно по этому моменту пишет Matthias Noback тут: [Inject a repository instead of an entity manager](https://matthiasnoback.nl/2014/05/inject-a-repository-instead-of-an-entity-manager/)

Возможно это уже оговаривалось множество раз в различных источниках, но не лишним будет также напомнить негласное правило именования пользовательских методов репозиториев:

* **`get`**`Something(...)` для случаев ожидания получения непустого результата (должен вернуться конкретный результат или массив с по крайней мере одним элементом)
* **`find`**`Something(...)` для случаев поиска по критериям, в результате которого может быть возвращен пустой результат (`null` или пустой массив)

Что касается использования функции добавления и сохранения сущности в репозиторий (внутренний вызов `flush`), то я лично больше склоняюсь к положительному решению, так как непосредственная реализация репозитория относится к инфраструктурному слою и там вполне допустима операция сохранения в физическое хранилище. В большинстве традиционных случаев использования это может быть полезным.

&#x20;Альтернативная точка зрения: [Doctrine Repositories should be collections without flush](https://www.thinktocode.com/2019/01/24/doctrine-repositories-should-be-collections-without-flush/)

